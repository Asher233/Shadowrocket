[General]
bypass-system = true
doh-server = https://dns.alidns.com/dns-query,https://doh.pub/dns-query
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32
dns-server = system
ipv6 = false

[Rule]
# Advert 广告屏蔽
DOMAIN-SET,https://anti-ad.net/surge2.txt,REJECT
# Global 全球加速
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list, PROXY
# China  国内直连
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/China/China.list, DIRECT

GEOIP,CN,DIRECT
FINAL,PROXY

[Host]
*testflight.apple.com = server:8.8.4.4


[URL Rewrite]
(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302 
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject

^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v\d\/player\/ad_break - reject
^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads - reject
^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) - reject
^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext - reject

[Script]
spotify-proto = type=http-response,pattern=^https:\/\/spclient\.wg\.spotify\.com\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$,requires-body=1,binary-body-mode=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js,script-update-interval=0

[MITM]
hostname = -redirector*.googlevideo.com,*.googlevideo.com,www.youtube.com,s.youtube.com,youtubei.googleapis.com,%APPEND% spclient.wg.spotify.com

ca-passphrase = Shadowrocket
ca-p12 = MIIP3gIBAzCCD6gGCSqGSIb3DQEHAaCCD5kEgg+VMIIPkTCCCh8GCSqGSIb3DQEHBqCCChAwggoMAgEAMIIKBQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIA3JNLF6bG7wCAggAgIIJ2EJe1qGEbDj6yv6qurJVe7NLQ2U4YFPwqy0RUAM0oglkWf2JrfwQwg/ljrVyWhwa3z4EleJuzz+PSPSVmdiOGWFWntiqh5O0erq5HxYn2SWqI0KTyzyuRK0oViyVu5IgdJcgvMxj7rqwlC+ZRIKYPdelsR7KaelFZknyn17hOqakFGIgVwEFIBSchUfhpXDc3FiucgheaDpjeBoYq4pNE79FhF25yMn/SqMsoLJvpS/ZQMjB/Z90JXB81EhXVeoIU3jEFVHVNpBd8uPHs7T5oxwmmC8+2u2EpwTvHqqtwqV2zWPipsgnXZotvgdSjubabuXuxsQOwcyGUKjlhMz4PNdn+J/2wGu2dyyX4jtlaky6xH5j55OoijsAsnzptxy6Civ0VQDIbiAcsvacq3ottlGr9UB14t2UeUH0SYmDoJS46uUk0WCMRwr1AFtKXzu30r6TLIArn2eYWysi/dn7MZ3dTSZteqC8/bVtQlWdslZR0myOEGcJPDoPSnVlU2jl0HOME6cClMDfJeYLwIAjobJjTkefo1J6uqIMS6COOivPkw30Xs/8nZEXnxkm772sJD81XgTcrtk7pFUt1P089/VJ9mxWsLNQCaGGOTg8e7j9hOWY8XM+h6PR/9pzmNqhDbEhmd2zUR7YgeFuckX4/nm+hBCJszuhJ9u3WsSYMXQ3WvTdEb+BarB3XdO5hbGTwjra0/gdtdUcUmIAB15rCV+3H9QSTfff+LYGr2RBq4IDz980am/JcfbzS1JzPRrHHZfgWEI59hp8tuuBf3khMzEZtlkGf7yvPvIUZdWRZuX55r9i/zl90Y5i2PoPWZV6FfIs0fDL6K+V9mM1VXnAID5DfHtyCHx1d+XubqnPuQfkZ2ufhe8VEow25Lp1H3wc6zQtj7zG0tl58HArybUgfi+9U9Elp3qgAQuE5tZpGzRuyjbWUmAg2At7dd9E/45w5B2FIbfrIYo7meZ1dJZpiRTArYGFKNsJIRMra+ZRD8HDBOnR+jFoZ3KigfKNRsV1sBHpTITKwk0OSbcD2WYSmTbMQ4wBIu5NHsxLk2fGP4Q+eaBj5O4hotpwQWsDUs5ZTlkcKlGBczJM0uPGnk2TepPsfgfHEppXXZ7mPQ2P57QS0aydrmoMCbmBGn5Zoa3RKDGDNXC1BAJe4TtRgUe5OPBF6f0q1Z+/UDwONvAVcVqQOVzJIbSFSuDthfMaz4gnj64pLz746SLS1q3s98725o82fqsuluBQCe+1Zio7OsuhM4RNWhJfn0szyO4/Eu/NskN2ntdwBBBd74o3HgSncwjlfuY3khqpzO8i4rVea2ucmkk43+LupPmb8byaBnx4YJjiyErX21mghuL4QxX7NPt/IOMoptipAIy3UPmedCNyNvTNBzD/5ZlN/defJ0mTl2ObJHnMtGAhsK9WEC1dkKLfw7oevKCzLH3wZ6cqBLAG/rhupOjkRlTo+m9SR804aw+a64KEqtYZBkEvQ4qqAm9KIiv/iheEPP4z68UGoT9T65TtkaW+gs8xsz57319diGGcZOFIo9QzGtVzApOrzJXVBJ3J5uV9fX7Bau8WGTme5obPicCGDiiHXYSBipMXIhTiu8IgIQtkKNEtJ1OQXJfdzqUtYL/yzJeazdeK8DovBzNdwDZOlzljt7Q2E6ywNXvjcLBuDcDoI7Pp4gmioqi7h1TlQuz6Yf/4q6mVJE248ibunSIDqPzgfiD0A8dzsVLeUuqawPxtRuwHgyfCoOVeZgO4Y4pNe8XUnWdRmOyvp8ldQ/fhx+e/3z19T2cfHYxbzSLStlEr46Q9OVOs58JNg/HKnMEKL5KOP+1qs7nFzUnD120eAOGphUn8BjP3krJG833NAvGRKAm23Xq0BwZKoudVCTAImlTxirrKngrt8oIYBpTywMjdJMYMIk9pcN25sPMqbhOpLRMZppw/+3tWy9fYXWIMnlyC4rvqyJw52kG8bp9KXhCk+fs84myQkqfny0HcqzbmbrwOlSy/6mG/h9ATxLKB5sL4fgmyU2M2VF+ovipLvrHnDjeJR3ZfCcAGV2Kr0EW8RwvWyHk+2VBB8yU8/h/nbkdbVoJQDAnCw5LkP4ajPOarTOwVby1SF6BNWAllYSVghKvTvmLjq+2+YMI3eoGKTFJDWM8we/W69jcW6I4gJ5I2PHiX+igb9kUb2JZbeOykW80uA2YsAQF4OMppB84nw6ndTBCICzHWoWgzFePxias1e+31mrRrt7GsIW6sXcuzIh7HiS6ER4pWOoPhxRY45Upsfj9D0X09cDv011rHEcVW3/2+vfyCaIlZUd2lok5xq6hlH4e8bdqiP+Bh+v8Jp6GjCWt9meVknPE8yYrczd995sXl/+T5AM0E0mmyQRLsplgSB6v/fFSBacGQ8wz0rzcM5FllqWGqc0HIaZ55/K25u3wBaFZm5HBoPtXn84WuNVB2pujee3+5LMkUyy5hdH7RPvetZHNIMrnT119GvrALJJkS14MiLbX6p97DBduKye2gCOZXtMjwPiDAHBeLhyJKy2YCFNqWipg4kmdidRbhkVP0eSa7hcHqnivi6+sIWjJLmgwnJXdo3NahR+agsZCFaDloTBsdhwLkLaHdfO+YQMa4xfDe2lJ+qCo75ECnTBRx78GDpomWZm6p8GS8MtgBN1AeuKKinrZx/eRs99ZBUSwjUPMsQGaZrMoY/WjckVFx+KbsXH5xHxXrXCFSpo1yErQ2QsB1QvH168TO6VJ9zgnPDwDw92j+CAcOgzxwPxWKko4LsLJ9no7yyWpdPgd1tXsQnjyIOxuVGkBNGQ9GgVkUd9oT3bAzjOI5j+be54RtwUTt63J3L+KaVeziyCsKp14uPuD/LhXl2Tf3CgS9298avl6VIW/YFFRw20+qrAoJRZk5c1GrSN9atQWjtzBvZGfNuosMUbvSHPMsRP4JrQZdAcyvi/5Q/NhP3wYDZ0IWBhbFS75GinoBs8mPH6eIeZQYWqDFPMwJ6weMjJvrC09RK4tsWcdvRUsC7TK8VhGOe+Y2hhhXN62GrJmogE7ZTx2Tih2qsPn+cKIGl6T33/yBwmsZTIyJTdZWRF9c9jezGsacGDFFhp7z6miF/k94vy9NXcAUgOYIBrkEM5MSdMiYYbYxH8Tqc/KONAs8xRDAbG9BCV3XXIXxIe9h3IBfpvauzFH/ZdbXoc5hX3gsdl5kJVI/MdHRPRuBGV5YgYppSQ/8yqEjSXZd43NoTYxrz3eTusfd9KZ+ZjJRwb2CCPuePckTbrnVOVpVGtRHeysC9fulHXrMHndB+2+ML3TwUxBtY81P+8wMFICPKkEzu8DKxoDtjeR2JNsa33QT6SUbRh77PQaoYA3U2zrigjCCBWoGCSqGSIb3DQEHAaCCBVsEggVXMIIFUzCCBU8GCyqGSIb3DQEMCgECoIIE7jCCBOowHAYKKoZIhvcNAQwBAzAOBAgQrdbDAl8qjAICCAAEggTIwZT6d1tKYvLgNasxRl/nv6sUQkurvUHhPlgRACXXE4e+ugIBf4RIgcTUzf5b14YJ6EqWnWZdAvwOWQhkZZNwS6GIhWSTnw82/VRa1Xc3iHar9rEJ/IMmBLfsTFUVBmelecYKobGJPplJsv6PoVVb6YcJXy4jnp5Uc70hhdfPZ1ZiqfAeRuOlyLqJYvfPmESqlj0UwsWXmkutJ9e4TyADLC/kK7HnWfaZSSwwkqWfEAQCja16SFvJ9/EHEclBCoo/ScIDPG1YCSX8CNohRVzBa99mlvui7oaaTM/a1DyHhMSY/P9Zk+fMB1BoNU6IkTIW8XICKUtYPE8WR6EYV1a4EAKr7OSCbZZ5L4A9RgSrxXfbJbUrASboh7Kcm5jybYfdGJxJK/82SmNXxffI8s4LfFqGT8iFz9e1v1VzHv/WhjmHrba9KkC5p+MaxSRmoMeemQHOCY5ZlJqts+axaOE5UCZXBMgQls+sgMHC/cjD7rC4Vt9dO8i3d9czYQP9bQX+9qzBQfVSGD6LUJc/jgnre/goLNo9s8s8WpgfAgPp+wzLxzAMbtO/fLJICpjp4GrtyByxbXoy//DjjUoQYf+VqsXNL8l8JAqroWcn+4ACW/VZNtvsZns3GfNNhiCcxLz9wBqx4F5yoGlFdah7j+lqHQ+bNTz733AkLbtNZCWYmxOokf8vcG5kCQ9JcQ4a6R/XBgdzvulAIaKgJgKzJiD8llWLiqG0qP4uErY/qtXMA4IXOKcTvgC33pU7upF0bQCRcTRf0bX7fsEuWCf7qwb16rGtK3h+V6EO1zjxuwzUm1WUHwLBVd577nGtNUpYOn5Gp14v1+RZ+mczTnrvpXLLnQIbcyNpb1Dv/b9ijL0GrrN0tf4cBFL/X/lwxPj0bIo+10hM/TANUa2f7YC9I2GQmCPpMxqXFVM7K2Qg9yO3IIe/2AcA9Ux2bR9aho8A7eM3VGFu5Cenf89xNWwhnpiL3HNKFPS0/ai7ngKg507SQC4GXR7pWpweWPvQAQi0yYnZRtuUUby9YPdUAYfGsVknDzDNLBvE4ls4wRQQ2tZUMD5MXPgVX7yxqTEMC/l3yKtunxBZMlQbq6iDe0t8szl0IM/NRMrotIiZ7xV5LvM4rOyjOKIfwyEsKrLIOuHFdzlA7RWvN7/UgUhZawt9cHi50L79N6N1rT+ekKTyAnvcYfAp1uEDTjoLZHgNWudXGyY0fedlHF8W1nxthcKA01+4vDtaR0z9wNngKSKfqBIEOzVpCb1emvgp057KD64DCDiN8TwKrTCbgYcoSS0H6mQX9KNUKgVPAAwSrQNldpjQs0YqYW/N4wOxVQvej0t+c6lvokcr8W04kB6aLqrDfWXp/d/3bHAHmJeZCns/fy8op82wYnwDdl0U5T4F1Y80oe8pps7CEq0/YobqctbsUpsZxLfbOagXE1bNlrqFw4EPmdds9JmJVVKG5aI4wzdx67qjOuOZKOeZtypA/djyrU8mejStsmgwI3lMBH6eSCn1q64geoiRWswphuENiJ+6tsXsXvEn1p95rQg5VSKSVkK4jlNUIZK+XJd0rb6JKk23EFYHOeVPjPpqzi5PMKVwvi/+MWVhmEb2yQ72yGLoq7IsxItlQ6JzLcfoMU4wIwYJKoZIhvcNAQkVMRYEFPSbvbUshnzcTLDysFkWiEDzFYJMMCcGCSqGSIb3DQEJFDEaHhgAUwBoAGEAZABvAHcAcgBvAGMAawBlAHQwLTAhMAkGBSsOAwIaBQAEFD9AbCky5ci4ciPJV0Bon70z+T6QBAh6WFpn+MjNHQ==
enable = true
